****************
Вариации товаров
****************

.. note::

    Вариации товаров являются частью :doc:`одноимённого модуля </user_guide/addons/product_variations/index>`.

Вариации — это похожие товары, которые отличаются друг от друга одной или несколькими :doc:`характеристиками </user_guide/manage_products/features/index>`. Например, "зелёная футболка "Спорт" размера S" и "красная футболка "Спорт" размера M". Таким товарам нужно три вещи:

#. Дать покупателям выбрать нужные значения характеристик на странице товара.

#. Показать часть вариаций (например, разные цвета) как отдельные позиции в каталоге. Так покупатель ещё до страницы товара увидит нужный цвет.

#. Не показывать часть вариаций (например, размеры) как отдельные позиции в каталоге. Так покупатель не запутается среди множества футболок с разными размерами и одинаковой картинкой.

   .. fancybox:: /user_guide/addons/product_variations/img/variation_selection.png
       :alt: Переключение между вариациями товара на витрине.

.. contents::
    :local:

============
Терминология
============

**Группа вариаций** — группа похожих товаров, которые отличаются друг от друга одной или несколькими характеристиками.

**Вариация** — товар, который относится к группе вариаций. Одновременно товар может относиться только к одной группе вариаций, но заменить группу у товара легко. Если вариацию отцепить от группы вариаций, она станет обычным товаром.

**Позиция в каталоге** — одно место на списке товаров. Пока не было вариаций, то "товар" и "позиция в каталоге" означали одно и то же. Но вариации могут и не занимать позицию в каталоге, поэтому возникла необходимость в таком термине.

.. hint::

    Каждая вариация — это товар, но не каждый товар — вариация. Используйте **Расширенный поиск** на списке товаров в панели администратора: например там можно сделать так, чтобы на списке товаров были только вариации или только позиции в каталоге.

---------------

У футболки 3 цвета, по 5 размеров в каждом. В этом случае у нас 15 *товаров*. Мы хотим добавить переключение между ними и объединяем их в *группу вариаций* на основе характеристик "Цвет" и "Размер". Теперь у нас 15 *вариаций*, и между всеми ними можно переключаться на их страницах.

В зависимости от настроек характеристик, эти 15 вариаций могут занимать:

* *1 позицию в каталоге* — выбор цветов и размеров остаётся только на странице товара;

* *3 позиции в каталоге* — футболки разных цветов отображаются на витрине как отдельные товары, а вот размеры можно выбрать только на странице товара;

* *5 позиций в каталоге* — если кто-то решит отображать размеры как отдельные товары, а выбор цвета оставить только на странице товара; с футболками такое неактуально, но может подойти для других товаров.

* *15 позиций в каталоге* — когда каждый размер и цвет отображается как отдельный товар, т.е. каждой вариации соответствует своя позиция в каталоге.

  .. note::

      Эта схема работает, даже когда характеристик больше двух. Настройки характеристик можно поменять в любой момент, но количество занимаемых позиций изменится только после того, как вы распустите и пересоздадите группу вариаций. Подробности ниже.

===================
Работа с вариациями
===================

------------------------------
Создание новой группы вариаций
------------------------------

Предположим, вы добавили в свой магазин новый товар и хотите создать для него вариации. Сделать это можно прямо со страницы товара:

#. На странице товара откройте вкладку **Вариации**.

#. Нажмите кнопку **Добавить вариации**.

#. На вкладке **Создать новые товары** введите название характеристики. Если такая характеристика в вашем магазине уже существует, то она будет предложена.

   .. important::
       
       В предложенных характеристиках отображаются далеко не все характеристики. Это зависит от того, какая **Цель** была указана в их :doc:`настройках </user_guide/manage_products/features/feature_attributes>`.

   Если ее еще не существует в магазине, нажмите кнопку **Добавить** и задайте одну из двух **Целей** для новой характеристики. От выбранной цели зависит, займут ли вариации с разными значениями этой характеристики отдельные позиции в каталоге.
	   
#. Добавьте **Варианты** для ваших характеристик.

#. Нажмите кнопку **Создать**. Вариации сгенерируются автоматически.

   .. fancybox:: img/add_new_variations-1.png
       :alt: Добавление вариаций на странице товара.
	   
-------------------------------------
Объединение товаров в группу вариаций
-------------------------------------

Допустим, вы импортировали товары поставщика в свой магазин и хотите объединить какие-то товары в одну группу. Это позволит вашим покупателям выбирать их, просто переключаясь между вариациями, а не путаться в аналогичных товарах с разными вариантами характеристик. Для этого необходимо сделать следующее:

#. Зайдите на страницу одного из товаров и откройте вкладку **Вариации**.

#. Нажмите кнопку **Добавить вариации**.

#. Перейдите на вкладку **Использовать существующие товары**. На ней отобразятся аналогичные товары с такими же характеристиками.

   .. important::
       
       В списке отобразятся товары, которые соответствуют трем условиям:
       
       * из той же категории;
       
       * с теми же характеристиками, но в других вариантах;
       
       * с **Целями** характеристик, позволяющими создавать вариации.

#. Выделите нужные товары и нажмите кнопку **Добавить вариации**.

   .. fancybox:: img/use_existing_products-1.png
       :alt: Создание группы вариаций на основе уже существующих товаров.
	   
---------------------
Управление и удаление
---------------------

Когда группа вариаций создана, то все товары из неё отображаются на вкладке **Вариации** у любого товара в группе. Здесь вы можете:

* увидеть, какие из вариаций занимают позицию в каталоге, а какие — нет. У вариаций без своей позиции в каталоге картинка меньше;

* указать, какую из нескольких вариаций делать выбранной по умолчанию для позиции в каталоге;

  .. important::

      Остальные вариации будут заимствовать многие свои свойства у вариации, выбранной по умолчанию.

* убрать вариацию из группы; товар при этом не пропадёт, а станет самостоятельным;

* удалить вариацию насовсем;

* поменять код группы — его можно использовать, чтобы потом добавлять другие товары в эту группу как вариации. Код группы может содержать только цифры, латиницу и знаки "-" и "_";

* добавить ещё вариаций в группу;

* переключиться на редактирование вариаций на списке товаров — так можно получить доступ к массовому редактированию и удалению;

* распустить группу — тогда все вариации из неё станут самостоятельными товарами, и пропадёт возможность переключаться между ними со страницы товара.

  .. fancybox:: img/product_variations_list-1.png
      :alt: У позиций в каталоге картинка больше, чем у вариаций. которые на списке товаров не отображаются.
