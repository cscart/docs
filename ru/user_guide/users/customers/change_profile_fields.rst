*************************
Управление полями профиля
*************************

Поля профиля содержат различную информацию о пользователе. Пользователи заполняют данные поля при регистрации учётных записей, редактировании профилей или во время оформления заказов. Некоторые поля могут быть обязательными для заполнения.

Список полей профиля доступен в меню **Администрирование → Поля профиля**. На этой странице вы можете:

.. contents::
   :backlinks: none
   :local:

.. fancybox:: img/profile_fields.png
    :alt: Список полей профиля в панели администратора.

===================================
Добавить/Редактировать поля профиля
===================================

#. Чтобы добавить поле профиля, нажмите на кнопку **+** в правом верхнем углу. Для редактирования существующего поля нажмите на **кнопку с изображением шестерёнки** рядом с нужным полем и выберите **Редактировать**.

#. Откроется страница, на которой вы сможете указать свойства выбранного поля:

   * **Описание** — название поля, которое видят покупатели и администраторы.

   * **Название поля** — последовательность символов, уникальная для каждого поля. Она служит для идентификации поля и может :ref:`использоваться в качестве переменной в редакторе документов. <profile-field-in-document>`

   * **Позиция** — позиция поля относительно других полей в списке.

   * **Тип** — тип поля профиля. Тип определяет, какие значения можно вводить или выбирать в данном поле. Если вы выберете *Радиогруппу* или *Список вариантов*, вам понадобится указать возможные варианты на вкладке *Варианты*. После создания поля профиля вы уже не сможете изменить его тип.

   * **Раздел** — определяет выбранное поле в одну из двух групп: *Контактная информация* или *Адрес плательщика/Адрес доставки*. Если вы выберете *Адрес плательщика/Адрес доставки*, то поле будет создано и для адреса плательщика, и для адреса доставки. Однако, вы всегда можете скрыть поля или сделать их обязательными отдельно для каждого из двух адресов.

   * **Пользовательский CSS-класс** — добавляет пользовательский CSS-класс к данному полю.

   * **Профиль (Показать/Обязательное)** — первая галочка отображает поле на странице создания или редактирования профиля. Вторая галочка делает поле обязательным. Не заполнив обязательное поле, пользователь не сможет создать или обновить профиль.

     .. important::

         Чтобы показать поле профиля на странице заказа или сделать его там обязательным, в меню **Дизайн → Макеты** перейдите на вкладку **Оформить заказ**. Вы сможете добавить поля в настройках блоков (например, *Адрес* или *Информация о покупателе*).

   * **Экспорт в CommerceML** — определяет, будет ли это поле в файле с заказами при экспорте в формате CommerceML.

     .. important::

         Настройка появится, если включен модуль :doc:`/user_guide/addons/commerceml/index`.

#. Указав всю необходимую информацию, нажмите **Создать** (или **Сохранить**, если вы редактируете уже существующее поле).

.. _profile-field-in-document:

================================================
Использовать поля профиля в редакторе документов
================================================

Начиная с версии 4.4.1, в CS-Cart встроен :doc:`редактор документов </user_guide/look_and_feel/documents/index>`. Он позволяет редактировать счета, упаковочные листы и другие документы. Поля профиля находятся в группе переменных ``user``. Просто нажмите на название поля, чтобы добавить его в шаблон документа.

.. important::

    Чтобы идентификатор поля профиля появился среди доступных, это поле должно отображаться на странице оформления заказа. О том, как это сделать, читайте выше.

.. fancybox:: img/custom_field_in_invoice.png
    :alt: Добавление поля в счёт.

Если поле включено в раздел *Адрес плательщика/Адрес доставки*, оно будет представлено двумя переменными с разными префиксами: ``b_`` (адрес плательщика) и ``s_`` (адрес доставки).

Также можно сослаться на данное поле профиля вручную. Например, чтобы добавить в документ информацию из поля с названием ``s_example_field``, вставьте строку ``{{ u.s_example_field }}`` на подходящее место на шаблоне.

=====================
Удалить поля профиля
=====================

.. warning::

    Если удалить поле профиля, то удалятся все данные, которые пользователи ввели в это поле. Если вы этого не хотите, то не удаляйте поле профиля, а просто не показывайте его пользователям.

Поля профиля, существующие по умолчанию, удалить нельзя. Удалить можно только поля профиля, созданные пользователями:

* Чтобы удалить одно поле профиля, наведите на него курсор, нажмите на **кнопку с изображением шестерёнки** и выберите **Удалить**.

* Чтобы удалить несколько полей:

  1. Отметьте галочками те поля, которые хотите удалить.

  2. Нажмите на **кнопку с изображением шестерёнки** в правом верхнем углу.

  3. Выберите **Удалить выбранные**.

Если поле профиля относится к разделу *Адрес плательщика/Адрес доставки*, то галочки и кнопка **Удалить** будут отображаться только в подразделе **Адрес доставки**. Удалив поле из адреса доставки, вы также удалите его и из адреса плательщика.
