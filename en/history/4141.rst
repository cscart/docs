************************
CS-Cart 4.14.1 Changelog
************************

=============================
New Features and Improvements
=============================

[+] Add-ons: Banners management: The ability to set the size of images was added for the banner block.

[+] Add-ons: Product Bundles: The new add-on was added.

[+] Add-ons: Landing pages from Tilda: A new addon for integrating CS-Cart with Tilda pages was added.

[+] Document editor: The tax number was added to company variables.

[+] Mobile application: Support for the Product Reviews add-on was added.

[+] Mobile application: Ability to sing in via Facebook was added for iOS devices.

[+] Mobile application: Now vendors can change product features via the application.

[+] Multi-Vendor: Add-ons: Stripe Connect payments: Express account onboarding was implemented.

[+] Multi-Vendor: Add-ons: Vendor-to-admin payments: The option to collect taxes from vendor's balance refill transaction was added.

[+] Multi-Vendor: Add-ons: Vendor panel configurator: The new add-on that simplifies vendor panel was added.

[+] Multi-Vendor: Categories: Now you can link categories to a specific storefront or make them common for all storefronts.

[+] Multi-Vendor: Notifications:  Now you can set vendor email addresses for the specific types of notifications.

[+] Multi-Vendor: Vendors: The "Review new vendors before granting access to the admin panel" setting was added. New vendors are assigned "New" or "Active" status.

[+] Multi-Vendor Ultimate: Add-ons: Order fulfillment by marketplace [Beta]: Stores and pickup points: An ability to add pickup points owned by marketplace and to use them for the "Pickup from store" shipping method was added.

[+] Order statuses: Now it is forbidden to change the Inventory field for the Open and Paid order statuses.

[+] Settings: Storefronts: Interface for quickly adding languages and currencies to the storefront detail page was developed.

[+] Shipping methods: Percentage option for rate surcharge or discount was added.

[+] Users: You can now allow users to request removal of their account from the profile page. The button is displayed if you enable it in the Settings → General section.

[+] UI/UX: Storefronts: The element for mass selection of entities for currencies and languages was changed.

[+] UX / UI: Elements of bulk property selection were changed.

=====================
Functionality Changes
=====================

[*] Add-ons: Product reviews: Performance: On the product detail page, the number of database queries has been reduced.

[*] Add-ons: RMA: Payment surcharge cannot be returned anymore.

[*] Multi-Vendor: Shipping methods: An ability to enable common shipping methods for new vendors automatically was added.

[*] Multi-Vendor: Design: Blocks: Shipping methods: An ability to edit text of the "No shipping required" notification and to turn this notification off on the checkout page was added.

[*] Multi-Vendor: Marketplace setup wizard: Redesigned the Vendors section.

[*] Multi-Vendor: Vendor panel: Products: The "Add product" button on the product list in the vendor panel now also has a link to product import.

=========
Bug Fixes
=========

[!] Add-ons: Filtering by "With photo" options did not work correctly if the product did not have reviews with images. Fixed.

[!] Add-ons: GDPR Compliance: Comments and reviews: PHP errors occurred while exporting user XML data. Fixed.

[!] Add-ons: Gift certificates: If a non-breaking space was used in the certificate amount, it was displayed as a code. Fixed.

[!] Add-ons: Google Analytics: Product data was not recorded in the transaction information using the Universal code. Fixed.

[!] Add-ons: Maps and geolocation: When the showing of shipping cost and time on product pages was enabled in the add-on settings, then there was a notification on the storefront that the product with zero price has not been added to the cart.

[!] Add-ons: Message center: The customer received notifications in the administrator's language. Fixed.

[!] Add-ons: Message center: Administrator could send messages to unregistered customer. Fixed.

[!] Add-ons: Mobile application: The variable, responsible for screen padding, was not uploaded to the archive with the settings. Fixed.

[!] Add-ons: Newsletters: Placing an order by a customer caused newsletter unsubscription in some cases. Fixed.

[!] Add-ons: Newsletters: Subscribers: The expand button didn't work on mobile devices. Fixed.

[!] Add-ons: Product Variations: Warehouses: Default variation did not change when product was out of stock in the warehouse. Fixed.

[!] Add-ons: Product Variations: Products: After a product was saved, its name was displayed in the language of the admin panel, not in the language of the content. Fixed.

[!] Add-ons: Stores & pickup points: City selection drop-down list was displayed incorrectly in RTL language. Fixed.

[!] Add-ons: Stripe payments: The Czech Republic, Malta and other countries were added to the list of supported countries.

[!] Add-ons: Warehouses: There was an error at checkout if negative quantity of product in stock was allowed. Fixed.

[!] Add-ons: Warehouses: When product cart contained more items than the nearest warehouse, the warning about shipping delay wasn't shown. Fixed.

[!] Add-ons: Warehouses: Export/Import: Import of products quantity didn't work if the product wasn't split by the warehouses before. Fixed.

[!] Admin panel: Js-error was coming from LazyLoader plugin. Fixed.

[!] Admin panel: Orders: Call Requests: The "Products in cart" button didn't work on mobile devices. Fixed.

[!] Admin panel: Files: The downloaded archive with several files couldn't be opened. Fixed.

[!] Cart: Choosing product options changed the order of items in the cart. Fixed

[!] Cart: Shippings methods: The State/Province field disappeared when changing the country. Fixed.

[!] Categories: In some cases, when deleting categories, the "trash-category" might not be created. Fixed.

[!] Categories: The bulk edit page of the selected categories was opened when pressing Enter. Fixed.

[!] Checkout: Customer email was lost during checkout in some cases. Fixed.

[!] Checkout: Shipping methods: When the "Show unavailable shippings" setting was enabled and there was no available shipping method for the rate area, customers saw the "Checkout" button. Fixed.

[!] Checkout: Profile fields: Billing address fields were displayed incorrectly in some cases, and they could not be removed from the order. Fixed.

[!] Core: The 403 and 404 pages were displayed incorrectly if init controller was extended by the init.pre.php. Fixed.

[!] Design: Admin panel: The page with the list of customers was displayed incorrectly if customers had long names and surnames. Fixed.

[!] Design: Layouts: Blocks: Deleting a block in a layout redirected the user to the default layout page. Deleting a block in a section redirected the user to the page with the block list. Fixed.

[!] Design: Products: Context menu: The text and checkboxes were on different levels when selecting the editable fields of the selected items. Fixed.

[!] Export/Import: If there was a space between category and feature name, features were imported incorrectly. Fixed.

[!] Help Section: The display of blocks in columns was not always correct. Fixed.

[!] Menus: Checking the active page in the menu did not work correctly. Fixed.

[!] Mobile application: Status bar color didn't change. Fixed.

[!] Mobile application: The title color for Pages block didn't change. Fixed.

[!] Mobile application: When the 'Access for authorized customers only' option was enabled, the pages didn't open. Fixed.

[!] Multi-Vendor: Orders: Buying products from different vendors without shipping required could cause orders in which vendors did not match their products. Fixed.

[!] Multi-Vendor: API: Products: Vendor could update or delete products of another vendor via API. Fixed.

[!] Multi-Vendor: Add-ons: Direct Customer-to-Vendor Payments: Orders: When creating an order from the admin panel, the current user was always assigned to the customer. Fixed.

[!] Multi-Vendor: Add-ons: Product Variations: Design: The table crossed page borders if the vendor had a long name. Fixed.

[!] Multi-Vendor: Add-ons: RMA: Product price could be incorrect at creating return page. Fixed.

[!] Multi-Vendor: Add-ons: RMA: Shipping tax could be returned after refund, even if shipping cost was not. Fixed.

[!] Multi-Vendor: Add-ons: RMA: Promotions: Return amount could be calculated incorrectly when taxes were calculated by unit price. Fixed.

[!] Multi-Vendor: Add-ons: RMA: Vendor plans: Payouts were calculated incorrectly if order was paid by payment method with taxed payment surcharge. Fixed.
 
[!] Multi-Vendor: Add-ons: Stores and pickup points: Warehouses: Vendor could see total amount of stores and warehouses in marketplace. Fixed.

[!] Multi-Vendor: Add-ons: Stores and pickup points: Warehouses: Vendors could see other users' warehouses and couldn't set the write-off priority of goods. Fixed.

[!] Multi-Vendor: Add-ons: Stripe Connect payments: When 3-D Secure was enabled, the marketplace fee was calculated incorrectly. Fixed.

[!] Multi-Vendor: Add-ons: Vendor data premoderation: An error occurred while editing an order. Fixed.

[!] Multi-Vendor: Add-ons: Vendor data premoderation: Dashboard: Products from pending vendors were not taken into account in the "Products on moderation" block. Fixed.

[!] Multi-Vendor: Add-ons: Vendor data premoderation: Menu for vendor moderation was not displayed when only approval of newly-created vendors setting was on. Fixed.

[!] Multi-Vendor: Add-ons: Vendor data premoderation: The update of the downloaded file did not change the product status to "requiring moderation". Fixed.

[!] Multi-Vendor: Add-ons: Watermarks: When importing products, the add-on settings were reset. Fixed.

[!] Multi-Vendor: Checkout: It was impossible to buy products from different vendors when some of these vendors did not use shipping methods. Fixed.

[!] Multi-Vendor: Menu: An incorrect tab was highlighted in the vendor panel menu. Fixed.

[!] Multi-Vendor: Mobile application: It was impossible to choose different shipping methods for products from different vendors. Fixed.

[!] Multi-Vendor: Shipping methods: Vendors: If product had the free shipping option enabled, but the shipping itself had not, an incorrect error message was shown on the checkout page. Fixed.

[!] Multi-Vendor: Users: The "Password validity period in days" setting worked incorrectly. Fixed.

[!] Multi-Vendor: Vendors: Accounting: The expand button didn't work on mobile devices. Fixed.

[!] Multi-Vendor: Vendors: Profiles: The default state value was not displayed for the new customer in the vendor panel. Fixed.

[!] Multi-Vendor: Vendors: Users: The button for saving changes was shown on the page for editing customer's account in the vendor panel. Fixed.

[!] Multi-Vendor Plus: Add-ons: Vendor Plans: Commissions by category: Gift certificates: Vendor's balance was refilled when the order was fully paid by gift certificate. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: The minimum price for a common product could be based on the price of a vendor linked to one storefront. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common Products for Vendors: Common products was not displayed in search results within layout blocks. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common products for vendors: Vendor prices were displayed on product page even if "Hide price and the Add to cart button" setting was selected. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Order fulfillment by marketplace: Order taxes has been calculated incorrectly. Fixed.

[!] Orders: Shipments: Extra characters were displayed in the button name. Fixed.

[!] Pages: Sitemap: Link pages were shown on the sitemap. Fixed.

[!] Performance: Fonts: The text was not displayed until the custom font was loaded. Fixed.

[!] Product options: Forbidden combinations: Forbidden combinations worked incorrectly. Fixed.

[!] Products: Files to sell: Tabs: When editing a file, a pop-up window for editing a tab could open and vice versa. Fixed.

[!] Products: Options: Zero value was not saved for Text/Text area type option. Fixed.

[!] Products: Subscribers: If the guest signed up for the notification that the product is in stock, then the checkbox was not saved on page reload. Fixed.

[!] Products: Subscribers: The checkbox for subscribing to notification of product receipt was not removed if the user was not logged in and did not enter an email. Fixed.

[!] Profile fields: Phone number input wasn't working properly on Android devices when international phone number format was used. Fixed.

[!] Promotions: Features: Using a feature with a filter type and feature style "Checkbox" in promotions conditions might not give a discount. Fixed.

[!] Promotions: Some promotion conditions were not displayed when editing a promotion. Fixed.

[!] SEO: Some SEO analyzers detected page changes due to HTML code of a page being different on every page load. Fixed.

[!] Settings: The notification about changing the global/individual settings did not appear when leaving the page. Fixed.

[!] Settings: Checkout: The "States" field was required on the Settings → Checkout page. Fixed.

[!] Statuses: Emails: Out of date notification settings were displayed in the order status settings. Fixed.

[!] Storefronts: An admin linked to a specific storefront could still have access for managing the data from other storefronts. Fixed.

[!] Taxes: Rate areas: The new rate area did not appear in the settings of the existing taxes. Fixed.

[!] Users: Customers could create users with duplicated @ symbol in the E-mail field. Fixed.

[!] WYSIWYG: Redactor II: The HTML redactor did not work if the Brazilian Portuguese language was selected. Fixed.

=============
Service Packs
=============

----------
4.13.1.SP1
----------

[!] Add-ons: Product variations: Product bundles: Product code wasn't shown on the product list in the admin panel. Fixed.

[!] Add-ons: Stripe payments: When paying with Google Pay, an order was not placed. Fixed.

[!] Add-ons: Warehouses: If you deleted the quantity of a product from all warehouses, then it was shown incorrectly on the product list page. Fixed.

[!] Multi-Vendor: Add-ons: PayPal Commerce Platform: It was not possible to place an order if surcharge was specified for the payment method or a gift certificate was applied. Fixed.

[!] Multi-Vendor: Vendors: Become a vendor: Language variable for email notification template was missing. Fixed.

[!] Multi-vendor Plus: Add-ons: Common products for vendors: If vendors was linked to the storefront, the common products were not shown on the storefront. Fixed.

[!] Multi-Vendor Plus: Add-ons: RMA: Vendor plans: Commissions by category: Payouts were calculated incorrectly in some cases. Fixed.



